
MACHINE = "ax9000"
MACHINE_DO_UBI_IMAGE = "1"
UBOOT_MACHINE = "ipq807x"
#UBOOT_MKIMAGE_EXTERNAL = "-E -B 0x1000 -p 0x1000"

OPENWRT_KERNEL_DTS_PATH = "qcom"
MACHINE_DEFAULT_DTB = "ipq8072-ax9000.dtb"
KERNEL_DEVICETREE = "qcom/ipq8072-ax9000.dtb"
#RAMDISK_COUNT = "0"

MAC80211_PACKAGE_CONFIGS = "CPTCFG_CFG80211=m \
	CPTCFG_MAC80211=m  \
	CPTCFG_ATH_CARDS=m \
	CPTCFG_ATH_COMMON=m \
	CPTCFG_QCOM_QMI_HELPERS=m \
	CPTCFG_ATH11K=m \
	CPTCFG_ATH11K_AHB=m \
	CPTCFG_WLAN=y \
	CPTCFG_CFG80211_WEXT=y \
	CPTCFG_CFG80211_CERTIFICATION_ONUS=y \
	CPTCFG_MAC80211_RC_MINSTREL=y \
	CPTCFG_MAC80211_RC_MINSTREL_HT=y \
	CPTCFG_MAC80211_RC_MINSTREL_VHT=y \
	CPTCFG_MAC80211_RC_DEFAULT_MINSTREL=y \
	CPTCFG_WLAN_VENDOR_ADMTEK=y \
	CPTCFG_WLAN_VENDOR_ATH=y \
	CPTCFG_WLAN_VENDOR_ATMEL=y \
	CPTCFG_WLAN_VENDOR_BROADCOM=y \
	CPTCFG_WLAN_VENDOR_CISCO=y \
	CPTCFG_WLAN_VENDOR_INTEL=y \
	CPTCFG_WLAN_VENDOR_INTERSIL=y \
	CPTCFG_WLAN_VENDOR_MARVELL=y \
	CPTCFG_WLAN_VENDOR_MEDIATEK=y \
	CPTCFG_WLAN_VENDOR_RALINK=y \
	CPTCFG_WLAN_VENDOR_REALTEK=y \
	CPTCFG_WLAN_VENDOR_RSI=y \
	CPTCFG_WLAN_VENDOR_ST=y \
	CPTCFG_WLAN_VENDOR_TI=y \
	CPTCFG_WLAN_VENDOR_ZYDAS=y \
	CPTCFG_MAC80211_MESH=y \
	CPTCFG_ATH9K_DEBUGFS=y \
	CPTCFG_ATH9K_HTC_DEBUGFS=y \
	CPTCFG_ATH10K_DEBUGFS=y \
	CPTCFG_ATH11K_DEBUGFS=y \
	CPTCFG_CARL9170_DEBUGFS=y \
	CPTCFG_ATH5K_DEBUG=y \
	CPTCFG_ATH6KL_DEBUG=y \
	CPTCFG_WIL6210_DEBUGFS=y \
	CPTCFG_ATH9K_DFS_CERTIFIED=y \
	CPTCFG_ATH10K_DFS_CERTIFIED=y \
	CPTCFG_ATH9K_PCI=y \
	CPTCFG_ATH_USER_REGD=y \
	CPTCFG_ATH_REG_DYNAMIC_USER_REG_HINTS=y \
	CPTCFG_ATH11K_MEM_PROFILE_512MB=y \
	CPTCFG_ATH5K_PCI=y \
	CPTCFG_B43LEGACY_DMA_MODE=y \
	CPTCFG_B43_LEDS=y \
	CPTCFG_B43LEGACY_LEDS=y \
	CPTCFG_RT2800PCI_RT33XX=y \
	CPTCFG_RT2800PCI_RT35XX=y \
	CPTCFG_RT2800PCI_RT53XX=y \
	CPTCFG_RT2800PCI_RT3290=y \
	CPTCFG_RT2800USB_RT33XX=y \
	CPTCFG_RT2800USB_RT35XX=y \
	CPTCFG_RT2800USB_RT3573=y \
	CPTCFG_RT2800USB_RT53XX=y \
	CPTCFG_RT2800USB_RT55XX=y \
	CPTCFG_RT2800USB_UNKNOWN=y \
	CPTCFG_RTL8XXXU_UNTESTED=y \
	CPTCFG_STAGING=y \
	CPTCFG_RTW88_8822BE=y \
	CPTCFG_RTW88_8822CE=y \
	CPTCFG_RTW88_8723DE=y \
	CPTCFG_CFG80211_DEBUGFS=y \
	CPTCFG_MAC80211_DEBUGFS=y \
	CPTCFG_WL_MEDIATEK=y \
	CPTCFG_HERMES_PRISM=y \
	CPTCFG_WL_TI=y \
	CPTCFG_WILINK_PLATFORM_DATA=y \
	CPTCFG_MAC80211_LEDS=y "

EXTRA_IMAGE_FEATURES = " \
	debug-tweaks \
	tools-debug \
	"

IMAGE_INSTALL:append = " zygoted servd webd web capwap-AC capwap-WTP kernel-module-qca-nss-dp kernel-module-ath11k-ahb"
IMAGE_INSTALL:append = " board-data-ax9000-ipq8074 ath11k-board-QCN9074 ath11k-caldata"
IMAGE_INSTALL:append = " ath11k-firmware-IPQ8074 ath11k-firmware-QCN9074 iw hostapd firmware-rtl8153a-4"
KERNEL_MODULE_AUTOLOAD += " qca-nss-dp ath11k_ahb"

OPENWRT_DEVICE_NAME = "xiaomi_ax9000"
OPENWRT_DEVICE_DTS_CONFIG = "config@hk14"
OPENWRT_DEVICE_BLOCKSIZE = "128"
OPENWRT_DEVICE_PAGESIZE = "2048"


#OPENWRT_IMAGE_CMDLINES = "kernel_bin , gzip , fit gzip , add_metadata , ubinize"
OPENWRT_IMAGE_CMDLINES = "kernel_bin , gzip , fit gzip external-static-with-initrd"
TMPDIR = "${TOPDIR}/tmp-ax9000"
