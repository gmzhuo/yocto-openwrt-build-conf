MACHINE = "ap1700v2"
#install tftp 80060000 openwrt-firmare-ap1700v2.bin&&erase 9f090000 +$filesize&&cp.b 80060000 9f090000 $filesize
INITRAMFS_IMAGE_BUNDLE = "0"

TCLIBC = "musl"
KERNEL_IMAGETYPES = "uImage"

MAC80211_PACKAGE_CONFIGS = "CPTCFG_CFG80211=m \
	CPTCFG_MAC80211=m  \
	CPTCFG_ATH_CARDS=m \
	CPTCFG_ATH_COMMON=m \
	CPTCFG_ATH9K=m \
	CPTCFG_ATH9K_AHB=y \
	CPTCFG_WLAN=y \
	CPTCFG_CFG80211_WEXT=y \
	CPTCFG_CFG80211_CERTIFICATION_ONUS=y \
	CPTCFG_MAC80211_RC_MINSTREL=y \
	CPTCFG_MAC80211_RC_MINSTREL_HT=y \
	CPTCFG_MAC80211_RC_MINSTREL_VHT=y \
	CPTCFG_MAC80211_RC_DEFAULT_MINSTREL=y \
	CPTCFG_WLAN_VENDOR_ADMTEK=y \
	CPTCFG_WLAN_VENDOR_ATH=y \
	CPTCFG_WLAN_VENDOR_ATMEL=y \
	CPTCFG_WLAN_VENDOR_BROADCOM=y \
	CPTCFG_WLAN_VENDOR_CISCO=y \
	CPTCFG_WLAN_VENDOR_INTEL=y \
	CPTCFG_WLAN_VENDOR_INTERSIL=y \
	CPTCFG_WLAN_VENDOR_MARVELL=y \
	CPTCFG_WLAN_VENDOR_MEDIATEK=y \
	CPTCFG_WLAN_VENDOR_RALINK=y \
	CPTCFG_WLAN_VENDOR_REALTEK=y \
	CPTCFG_WLAN_VENDOR_RSI=y \
	CPTCFG_WLAN_VENDOR_ST=y \
	CPTCFG_WLAN_VENDOR_TI=y \
	CPTCFG_WLAN_VENDOR_ZYDAS=y \
	CPTCFG_MAC80211_MESH=y \
	CPTCFG_ATH9K_DEBUGFS=y \
	CPTCFG_ATH9K_HTC_DEBUGFS=y \
	CPTCFG_ATH10K_DEBUGFS=y \
	CPTCFG_ATH11K_DEBUGFS=y \
	CPTCFG_CARL9170_DEBUGFS=y \
	CPTCFG_ATH5K_DEBUG=y \
	CPTCFG_ATH6KL_DEBUG=y \
	CPTCFG_WIL6210_DEBUGFS=y \
	CPTCFG_ATH9K_DFS_CERTIFIED=y \
	CPTCFG_ATH10K_DFS_CERTIFIED=y \
	CPTCFG_ATH9K_PCI=y \
	CPTCFG_ATH_USER_REGD=y \
	CPTCFG_ATH_REG_DYNAMIC_USER_REG_HINTS=y \
	CPTCFG_ATH11K_MEM_PROFILE_512MB=y \
	CPTCFG_ATH5K_PCI=y \
	CPTCFG_B43LEGACY_DMA_MODE=y \
	CPTCFG_B43_LEDS=y \
	CPTCFG_B43LEGACY_LEDS=y \
	CPTCFG_RT2800PCI_RT33XX=y \
	CPTCFG_RT2800PCI_RT35XX=y \
	CPTCFG_RT2800PCI_RT53XX=y \
	CPTCFG_RT2800PCI_RT3290=y \
	CPTCFG_RT2800USB_RT33XX=y \
	CPTCFG_RT2800USB_RT35XX=y \
	CPTCFG_RT2800USB_RT3573=y \
	CPTCFG_RT2800USB_RT53XX=y \
	CPTCFG_RT2800USB_RT55XX=y \
	CPTCFG_RT2800USB_UNKNOWN=y \
	CPTCFG_RTL8XXXU_UNTESTED=y \
	CPTCFG_STAGING=y \
	CPTCFG_RTW88_8822BE=y \
	CPTCFG_RTW88_8822CE=y \
	CPTCFG_RTW88_8723DE=y \
	CPTCFG_CFG80211_DEBUGFS=y \
	CPTCFG_MAC80211_DEBUGFS=y \
	CPTCFG_WL_MEDIATEK=y \
	CPTCFG_HERMES_PRISM=y \
	CPTCFG_WL_TI=y \
	CPTCFG_WILINK_PLATFORM_DATA=y \
	CPTCFG_MAC80211_LEDS=y "

IMAGE_INSTALL:append = " zygoted servd webd web capwap-WTP capwap-RADIOD kernel-module-ath9k kernel-module-ath10k kernel-module-ath10k-pci"
IMAGE_INSTALL:remove = " quectel-cm f2fs-tools freeradius usb-modeswitch "
IMAGE_INSTALL:append = " wifi-caldata firmware-qca988x-ct iw hostapd"
KERNEL_MODULE_AUTOLOAD += " ath9k ath10k_pci"

TCLIBC = "glibc"

OPENWRT_IMAGE_CMDLINES = "kernel_bin , add_dtb , lzma , uImage lzma , add_rootfs "
HOTPLUG_SCRIPTS = "'ath9k-eeprom 10-ath9k-eeprom' 'ath10k-caldata 11-ath10k-caldata' "
HOTPLUG_SCRIPTS_DEPENDS = "k2t.sh"
PACKAGE_EXCLUDE += " ldconfig"
